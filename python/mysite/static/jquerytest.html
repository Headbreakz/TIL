
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

<button id="btnAdd">Add</button>



<div id="view">
  <div id="item">
   <a href=list?id=4> <span id=title>제목</span> </a>
     조회수<span id=cnt> 0 </span>
      <a id="del" href="javascript:deleteBoard(1)">지우기</a>
   <br>
  <div> 
</div>   

<script>
   //$("#view").append("<a href=fefef>데이터2</a><br>")
   //$("#view").append("<a href=fefef>데이터2</a><br>")
   //$("#title").html("제목1")
   //$("#cnt").text("10")

   $("#del").attr("href","javascript:deleteBoard(6)");
   
   $("#item").hide();

   var page=1

   
   function getPage(page) {
<!--		json = {"datas": [{"pk": 1, "title": "123123", "cnt": 5}, {"pk": 2, "title": "32321321", "cnt": 0}, {"pk": 3, "title": "32312323123", "cnt": 0}]}-->

	    $.get("/myboard/ajaxget",{page:page}, function(json){
        console.log(JSON.stringify(json));

        if (json.datas.length == 0) alert("마지막페이지");
		for (i = 0; i < json.datas.length; i++) {
			//console.log( json.datas[i].title);
			item = $("#item").clone();
			item.show();
			item.attr("id","item_"+json.datas[i].pk);
			$("#title", item).html(json.datas[i].title);
			$("#cnt", item).text(json.datas[i].cnt);
			$("#del", item).attr("href","javascript:deleteBoard(" + json.datas[i].pk +")");
			$("#view").append(item);   					
		}
    });
   }


   $("#btnAdd").click( function() {
            page++;
            getPage(page);
   });

   getPage(page);

   function deleteBoard(pk){
            $.get("/myboard/ajaxdel",{pk:pk}, function(json){
                    $("#item_"+pk).remove();
                    })
        }
   


</script>